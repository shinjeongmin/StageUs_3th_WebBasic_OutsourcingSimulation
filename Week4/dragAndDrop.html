<!DOCTYPE html>

<head>
    <link rel="stylesheet" type="text/css" href="dragAndDrop.css">
</head>

<body>
    <div id="colorParent">
        <div id="color1" class="box" draggable="true"></div>
        <div id="color2" class="box" draggable="true"></div>
        <div id="color3" class="box" draggable="true"></div>
    </div>
    <div id="result"></div>
    <script>
        // 브라우저 연산을 실행한 후 함수를 적용할 수 있도록 window.onload 처리
        window.onload = function () {
            var backColor2 = null;
            var clickColorTag;

            var colorParent = document.getElementById("colorParent");
            colorParent.ondragstart = function (e) {
                // var backColor = color1.style.getPropertyPriority("background-color");
                // getPropertyPriority : 외부 css 파일이 있어서 연산을 하기 전에 접근하여 값을 가져오므로 
                // tag 자체 style property에서 사용해야만 접근 가능

                backColor2 = window.getComputedStyle(clickColorTag).backgroundColor;
            }

            var color1 = document.getElementById("color1");
            var color2 = document.getElementById("color2");
            var color3 = document.getElementById("color3");
            color1.onmousedown = getId;
            color2.onmousedown = getId;
            color3.onmousedown = getId;
            function getId(e) {
                clickColorTag = e.target;
            }

            var dropBox = document.getElementById("result");
            dropBox.ondragover = function (e) {
                e.preventDefault();
                // drag and drop에서의 필수적인 예외처리, 마우스를 클릭하고 drag를 
                // 시작해야 이벤트가 호출되는데 그 사이에 다른 이벤트가 interrupt될 수 
                // 있기 때문에 preventDefault() 예외처리를 해주어야함.
            }
            dropBox.ondrop = function () {
                dropBox.style.backgroundColor = backColor2;
            }
        }
    </script>
</body>

</html>